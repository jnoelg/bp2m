<main class="main">
  <header class="header">
    <h1 class="app-title">{{ title() }}</h1>
    <p class="app-subtitle">Tap the heart to the beat of your music</p>
  </header>

  <div class="tap-container">
    <button id="tap-btn" type="button" class="tap-btn" (click)="addBpmEvent()" aria-label="Tap Beat">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"></path>
      </svg>
    </button>
  </div>

  @if (getIntervalCount() <= 0) {
    <div class="empty-state">
      Start tapping to measure BPM...
    </div>
  }

  @if (getIntervalCount() > 0) {
    <div class="stats-grid">
      <div class="stat-card">
        <span class="stat-label">Average BPM</span>
        <span class="stat-value">{{getBpmAvg()}}</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">Filtered BPM</span>
        <span class="stat-value">{{getAvgWithin3StdDeviations()}}</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">Interval</span>
        <span class="stat-value">{{getAvg()}}</span>
      </div>
      <div class="stat-card">
        <span class="stat-label">Deviation</span>
        <span class="stat-value">{{getStdDeviation()}}</span>
      </div>
    </div>

    <div class="chart-card">
      <div class="chart-header">
        <div class="chart-info">
          <strong>{{getIntervalCount()}}</strong> beats over <strong>{{getDuration()}}s</strong>
        </div>
        <a href="#" class="reset-link" (click)="reset(); $event.preventDefault()">Reset Data</a>
      </div>
      <div class="chart-wrapper">
        <canvas baseChart
          [data]="lineChartData"
          [options]="lineChartOptions"
          [type]="'line'">
        </canvas>
      </div>
    </div>
  }
</main>

<router-outlet />
